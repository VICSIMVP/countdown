function syncMessageReceived(e){var t=e.msgNm,n=e.msgVal;switch(console.log("Message Received: "+t),t){case"setTime":console.log("Setting Time..."+n),countDownDate=new Date(parseInt(n)),bStarted=!0,document.getElementById("btnStartStop").textContent="Stop ",x=setInterval(updateTimer);break;case"stopTime":bStarted=!1,document.getElementById("btnStartStop").textContent="Start",clearInterval(x);break;case"updateBegin":document.getElementById("titler").innerHTML=String(n);break;case"lilTimer":showHideTimer(n)}}function onConfigured(){console.log("Configuring Now"),setPermissions()}function roleChanged(){setPermissions()}function setPermissions(){console.log("Setting Permissions"),isHost()?(document.getElementById("btnStartStop").style.display="inline",document.getElementById("btnSettings").style.display="inline"):(console.log("Hiding buttons..."),document.getElementById("btnStartStop").style.display="none",document.getElementById("btnSettings").style.display="none")}function isHost(){if(syncConnector){var e=syncConnector.getMyUserDetails();return e.data.role==K_HOST||e.data.role==K_PRESENTER?(console.log("Is Host: True"),!0):(console.log("Is Host: False"),!1)}return!0}function isParticipant(){return!isHost()||(console.log("Is Participant: False"),!1)}function startStopTimer(){if(bStarted)clearInterval(x),bStarted=!1,document.getElementById("btnStartStop").textContent="Start",syncConnector&&syncConnector.dispatchSyncMessage("stopTime","No MSG value needed",!1);else{var e=Number(document.getElementById("timer").textContent);countDownDate=(new Date).getTime()+60*e*1e3;(new Date).getTime();var t=countDownDate.toString();bStarted=!0,document.getElementById("btnStartStop").textContent="Stop",x=setInterval(updateTimer),console.log("Setting Time: "+t),syncConnector&&(console.log("...sending dispatch message..."),syncConnector.dispatchSyncMessage("setTime",t,!1,!1))}}function showSettings(){""==document.getElementById("numMinutes").value&&(document.getElementById("numMinutes").value=document.getElementById("timer").innerHTML);var e=document.getElementById("numMinutes");e.addEventListener("keydown",function(e){13==e.keyCode&&(e.preventDefault(),document.getElementById("btnOk").click())}),document.getElementById("settings").style.display="block",document.getElementById("numMinutes").focus()}function cancelSettings(){document.getElementById("settings").style.display="none"}function setTime(){var e=document.getElementById("numMinutes").value;try{if(""==e)throw"value is empty.";if(isNaN(e))throw"Please enter a number.";if(e>600)throw"Please enter 600 minutes or less.";bStarted&&(clearInterval(x),bStarted=!1,document.getElementById("btnStartStop").textContent="Start"),document.getElementById("timer").innerHTML=e,document.getElementById("settings").style.display="none",document.getElementById("btnStartStop").focus(),startStopTimer()}catch(e){document.getElementById("msgError").innerHTML=e}}function timerChecked(){var e=document.getElementById("chkTimer");syncConnector&&syncConnector.dispatchSyncMessage("lilTimer",e.checked,!1,!0)}function showHideTimer(e){e||isHost()?document.getElementById("granular").style.display="block":document.getElementById("granular").style.display="none"}function changeTitle(){var e=document.getElementById("titler").innerHTML;syncConnector&&syncConnector.dispatchSyncMessage("updateBegin",e,!1)}function updateTimer(){var e=(new Date).getTime(),t=countDownDate-e,n=(Math.floor(t/864e5),Math.floor(t%864e5/36e5)),o=Math.floor(t%36e5/6e4),s=Math.floor(t%6e4/1e3),r=o;if(t<0)clearInterval(x),bStarted=!1,document.getElementById("btnStartStop").innerHTML="Start",document.getElementById("timer").innerHTML="1",document.getElementById("units").innerHTML="moment";else{switch(o){case 0:document.getElementById("timer").innerHTML="1",document.getElementById("units").innerHTML="minute";break;default:if(n>0){var i=60*n;r=o+i}document.getElementById("timer").innerHTML=String(r+1),document.getElementById("units").innerHTML="minutes"}document.getElementById("granular").innerHTML=n+":"+(MIN_MASK+o).substr(-MIN_MASK.length)+":"+(SEC_MASK+s).substr(-SEC_MASK.length)}}var countDownDate,myMtg,bStarted=!1;const K_HOST="owner",K_PRESENTER="presenter",K_PARTICIPANT="viewer",MIN_MASK="00",SEC_MASK="00";var x,syncConnector=ConnectCustomSDK.SyncConnector||{};syncConnector&&(syncConnector.init(onConfigured,"com.adobe.connect.countdowntimer","1.0.001","connectsdkhook"),syncConnector.registerCallback("syncMessageReceived",syncMessageReceived),syncConnector.registerCallback("roleChanged",roleChanged));